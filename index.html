<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MathsForFun</title>
  <meta name="description" content="Simple homepage for unblocked games and apps.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script>
    if (window.location.protocol === 'file:') {
      window.location.replace('http://localhost:8000');
    }
  </script>
  <style>
    :root { --bg:#0b0f1a; --card:#121826; --muted:#8aa0b6; --text:#e6eef8; --accent:#4f9cf0; --accent2:#7c4dff; }
    * { box-sizing: border-box }
    html,body { height:100% }
    body { margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: radial-gradient(1200px 600px at 80% -10%, #1b2a40 0%, #0b0f1a 45%), var(--bg); color: var(--text); }
    a { color: inherit; text-decoration: none; cursor: pointer; }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px }
    header { display:flex; align-items:center; justify-content:space-between; gap:16px; padding: 12px 0 }
    .brand { display:flex; align-items:center; gap:12px }
    .logo { width:40px; height:40px; border-radius:12px; background: linear-gradient(135deg, var(--accent), var(--accent2)); display:grid; place-items:center; font-weight:700 }
    .brand h1 { margin:0; font-size: 20px; letter-spacing: .2px }
    .brand small { display:block; color: var(--muted); font-size: 12px }
    .actions { display:flex; gap:8px }
    .btn { background: #1a2233; border: 1px solid #28324a; color: var(--text); padding: 10px 14px; border-radius:10px; transition:.15s ease; font-weight:600 }
    .btn:hover { background:#212a3f; transform: translateY(-1px) }
    .hero { margin-top: 18px; background: linear-gradient(180deg, rgba(79,156,240,.15), transparent 60%); border: 1px solid #22314b; border-radius:18px; padding: 24px }
    .hero h2 { margin:0 0 10px; font-size: 26px }
    .hero p { margin:0; color: var(--muted) }
    .toolbar { display:flex; flex-wrap:wrap; gap:10px; margin-top: 16px }
    .search { flex: 1 1 280px; display:flex; align-items:center; gap:8px; background:#0f1624; border:1px solid #22314b; border-radius:12px; padding:10px 12px }
    .search input { flex:1; background:transparent; border:0; outline:none; color:var(--text); font-size:14px }
    
    .grid { margin-top: 18px; display:grid; grid-template-columns: repeat(4, 1fr); gap:12px }
    @media (max-width: 900px) { .grid { grid-template-columns: repeat(3, 1fr) } }
    @media (max-width: 640px) { .grid { grid-template-columns: repeat(2, 1fr) } header { flex-direction:column; align-items:flex-start } }
    .card { display:flex; flex-direction:column; gap:10px; background: var(--card); border:1px solid #22314b; border-radius:14px; padding:12px; transition:.15s ease; cursor: pointer; }
    .card:hover { transform: translateY(-2px); border-color:#2c3d61 }
    .thumb { aspect-ratio: 1 / 1; width:100%; border-radius:10px; background: #0f1624; display:grid; place-items:center; font-weight:700; font-size: 22px; letter-spacing:.5px; overflow:hidden }
    .thumb img { width:100%; height:100%; object-fit:cover; display:block }
    .title { font-weight:700; font-size:14px }
    .meta { display:flex; justify-content:space-between; align-items:center; color: var(--muted); font-size:12px }
    footer { margin: 28px 0 8px; color: var(--muted); font-size: 12px }
    .pill { padding:4px 8px; border-radius:999px; border:1px solid #2c3d61; font-size:11px }
    
    .back-to-top {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: var(--accent);
      color: white;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transform: translateY(20px);
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 100;
      border: none;
    }
    .back-to-top.visible {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    .back-to-top:hover {
      background: var(--accent2);
      transform: translateY(-4px);
    }
    
    .version-display {
      position: fixed;
      bottom: 34px;
      right: 84px;
      color: var(--muted);
      font-size: 12px;
      font-weight: 600;
      opacity: 0;
      visibility: hidden;
      transform: translateY(20px);
      transition: all 0.3s ease;
      z-index: 100;
      pointer-events: none;
    }
    .version-display.visible {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
  </style>
</head>
<body>
  
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">MFF</div>
        <div>
          <h1>MathsForFun</h1>
          <small>Unblocked games and tools</small>
        </div>
      </div>
      <div class="actions">
        <a class="btn" href="https://bit.ly/3MZHk4N" target="_blank">Request a Game</a>
      </div>
    </header>

    <section class="hero">
      <h2>Play instantly</h2>
      <p>Select a game below to start playing without any blocks or ads.</p>

      <div class="toolbar">
        <div class="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#8aa0b6" stroke-width="2" stroke-linecap="round"/><circle cx="11" cy="11" r="7" stroke="#8aa0b6" stroke-width="2"/></svg>
          <input id="searchInput" type="text" placeholder="Search games...">
        </div>
      </div>
    </section>

    <section class="grid" id="grid"></section>

    <footer>
      <span class="pill">Tip</span>
      Click a card to play
    </footer>
  </div>

  <button id="backToTop" class="back-to-top" aria-label="Back to top">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>
  </button>
  
  <!-- Version Number - Change this before pushing to GitHub -->
  <div id="versionDisplay" class="version-display"></div>

  <script>
    // EDIT THE VERSION HERE
    const SITE_VERSION = 'v1.0.1';

    const items = [
        { id: 'slope', title: 'Slope', color: '#23d944', url: 'games/slope.html', thumb: 'thumbnails/slope.png' },
        { id: 'krunker', title: 'Krunker', color: '#fbc02d', url: 'games/krunker_io/index.html', thumb: 'thumbnails/krunker.jpg' },
        { id: '1v1lol', title: '1v1.LOL', color: '#ff0000', url: 'games/1v1-lol-online_github_io/index.html', thumb: 'thumbnails/1v1-lol.jpg' },
        { id: 'capybara', title: 'Capybara Clicker', color: '#8B4513', url: 'games/capybara-game_com/index.html', thumb: 'thumbnails/capybaraclicker.jpg' },
        { id: 'run3', title: 'Run 3', color: '#0000ff', url: 'games/run-4/index.html', thumb: 'thumbnails/run-3-game.png' }
    ]

    const grid = document.getElementById('grid')
    const searchInput = document.getElementById('searchInput')

    function render(list) {
      grid.innerHTML = ''
      list.forEach(x => {
        const card = document.createElement('div')
        card.className = 'card'
        card.onclick = () => launchGame(x.id)
        
        const thumb = document.createElement('div')
        thumb.className = 'thumb'
        
        if(x.thumb) {
            const img = document.createElement('img')
            img.src = x.thumb
            img.alt = x.title
            thumb.append(img)
        } else {
            thumb.style.background = `linear-gradient(180deg, ${x.color}22, transparent)`
            thumb.style.border = `1px solid ${x.color}55`
            thumb.textContent = x.title[0].toUpperCase()
        }
        
        const title = document.createElement('div')
        title.className = 'title'
        title.textContent = x.title
        
        const meta = document.createElement('div')
        meta.className = 'meta'
        const go = document.createElement('span')
        go.textContent = 'Play'
        meta.append(go)
        
        card.append(thumb, title, meta)
        grid.append(card)
      })
      
      if(list.length === 0) {
          grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: var(--muted);">No games available right now. Click "Request a Game" to suggest one!</p>'
      }
    }

    function applyFilter() {
      const q = searchInput.value.trim().toLowerCase()
      const list = items.filter(i => i.title.toLowerCase().includes(q))
      render(list)
    }

    searchInput.addEventListener('input', applyFilter)
    render(items)

    /* Back to Top Logic */
    const backToTopBtn = document.getElementById('backToTop');
    const versionDisplay = document.getElementById('versionDisplay');
    
    // Set version text
    versionDisplay.textContent = SITE_VERSION;

    window.addEventListener('scroll', () => {
      // Show when scrolled near the bottom (within 200px of bottom)
      // or if the page is short, just ensure it doesn't overlap weirdly
      // The user asked for "if scroll allthe way down", so we check proximity to bottom.
      const scrollPosition = window.innerHeight + window.scrollY;
      const bodyHeight = document.body.offsetHeight;
      
      if (scrollPosition >= bodyHeight - 200) {
        backToTopBtn.classList.add('visible');
        versionDisplay.classList.add('visible');
      } else {
        backToTopBtn.classList.remove('visible');
        versionDisplay.classList.remove('visible');
      }
    });

    backToTopBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    /* Game Launch Logic */
    function launchGame(id) {
        const game = items.find(i => i.id === id);
        if(game && game.url) {
            window.location.href = game.url;
        }
    }
  </script>
</body>
</html>